# Install docker if necessary
# On linux:
sudo apt update
sudo apt-get install docker.io -y

# Build "rsau" docker image
sudo docker build --platform=linux/amd64 -t rsau .

# To check under the hood
sudo docker run --platform=linux/amd64 -it rsau bash

# To push to private repo
sudo docker login -u $DOCKER_USER_ID
sudo docker tag rsau:latest $DOCKER_USER_ID/rsau:latest
sudo docker push $DOCKER_USER_ID/rsau:latest

# To push to GitHub registry
sudo docker login ghcr.io -u $GITHUB_USER_ID
sudo docker tag rsau:latest ghcr.io/viralemergence/rna-seq-analysis-utils:latest
sudo docker push ghcr.io/viralemergence/rna-seq-analysis-utils:latest